#!/bin/bash
set -exuo pipefail

job_dir=$(dirname "${BASH_SOURCE[0]}")

skip=$(cat <<EOF
ABOUT-NLS
*/afl-tests/*
**/auditor/*.sql
*.bbl
*.bib
*.bst
*/cbdc-es.tex
*/cbdc-it.tex
*.cls
config.status
contrib/*
*/contrib/hellos/**
*.dat
*.deflate
*.doc
**/doc/flows/main.de.tex
*/doc/texinfo.tex
*.docx
*.ecc
*.eot
*.epgz
*.eps
*.epub
**/ExchangeSelection/example.ts
*.fee
*.fees
*.file
**/fonts/**
*.gif
*/.git/**
*.gz
*/i18n/strings.ts
*.info
*.jpeg
*.jpg
*.??.json
*.json
*key
*.latexmkrc
*/m4/ax_lib_postgresql.m4
*/m4/libgcrypt.m4
**/*.map
*.min.js
*.mp4
*.odg
*.ods
*.odt
*.pack.js
*.pdf
*.png
*.PNG
**/pnpm-lock.yaml
*.po
*.pptx
*.priv
**/rfc.bib
*.rpath
**/signing-key.asc
*.sqlite
*/src/anastasis-data.ts
**/*.svg
*.svg
*.tag
**/templating/mustach**
*/templating/test?/**
*/testcurl/test_tricky.c
*.tgz
*.ttf
*.ttf
**/valgrind.h
*/vpn/tests/**
*.wav
*.woff
*.woff2
*.xcf
*.xlsx
*.zkey
EOF
);

codespell -I "${job_dir}"/dictionary.txt -S ${skip//$'\n'/,}
