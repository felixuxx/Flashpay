#!/bin/bash
set -exuo pipefail

job_dir=$(dirname "${BASH_SOURCE[0]}")

skip=$(cat <<EOF
ABOUT-NLS
*/afl-tests/*
**/auditor/*.sql
**/templating/test-specs/*
*.bbl
*.bib
*build-aux*
*.bst
*.cache/*
*/cbdc-es.tex
*/cbdc-it.tex
*.cls
configure*
config.status
config.guess
./src/include/taler_dbevents.h
*/contrib/*
*/contrib/hellos/**
*.dat
*.deflate
*.doc
*/doc/*
**/doc/flows/main.de.tex
*/doc/texinfo.tex
*.docx
*.ecc
*.eot
*.epgz
*.eps
*.epub
**/ExchangeSelection/example.ts
*.fee
*.fees
*.file
**/fonts/**
*.gif
*/.git/**
*.gz
*/i18n/strings.ts
*.info
*.jpeg
*.jpg
*.??.json
*.json
*/keys/*
*key
*.latexmkrc
*libtool*
*.log
*/m4/*
*.m4
**/*.map
*.min.js
*.mp4
*.odg
*.ods
*.odt
*.pack.js
*.pdf
*.png
*.PNG
**/pnpm-lock.yaml
*.po
*.pptx
*.priv
**/rfc.bib
*.rpath
**/signing-key.asc
*.sqlite
*/src/anastasis-data.ts
**/*.svg
*.svg
*.tag
**/templating/mustach**
*/templating/test?/**
*/testcurl/test_tricky.c
*/debian/tmp/**
*/debian/taler-exchange/**
*/debian/.debhelper/**
*/debian/autoreconf.before
*/debian/autoreconf.after
debian/taler-terms-generator/**/*
taler-terms-generator
*.tgz
*.ttf
*.ttf
**/valgrind.h
*/vpn/tests/**
*.wav
*.woff
*.woff2
*.xcf
*.xlsx
*.zkey
release-artifacts
EOF
);

echo Current directory: `pwd`

codespell -I "${job_dir}"/dictionary.txt -S ${skip//$'\n'/,}
